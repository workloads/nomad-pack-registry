// prometheus.scrape is the name of the component and "default" is its label.
prometheus.scrape "default" {
    // Tell the scraper to scrape at http://localhost:12345/metrics.
    // The http:// and metrics are implied but able to be overwritten.
    targets = [
      {"__address__" = "172.17.0.1:9273"},
    ]

    // Forward the scrape results to the receiver. In general,
    // Flow uses forward_to to tell which receiver to send results to.
    // The forward_to is an argument of prometheus.scrape.default and
    // the receiver is an exported field of prometheus.remote_write.prom.
    forward_to = [
      prometheus.remote_write.prom.receiver,
    ]
}

prometheus.remote_write "prom" {
    endpoint {
        url = "https://prometheus.example.com/api/prom/push"

        basic_auth {
            username = ""
            password = ""
      }
    }
}
